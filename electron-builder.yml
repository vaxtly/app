appId: com.vaxtly.app
productName: Vaxtly

directories:
  buildResources: build
  output: dist

files:
  - out/**/*
  - package.json
  - node_modules/**/*

asarUnpack:
  - node_modules/better-sqlite3/**/*

npmRebuild: true

afterSign: build/notarize.js

publish:
  provider: github
  owner: vaxtly
  repo: app
  releaseType: release

extraResources:
  - from: build/icons
    to: icons

win:
  target: nsis
  artifactName: Vaxtly-${version}-setup.${ext}
  executableName: vaxtly
  icon: build/icon.ico

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true

mac:
  target:
    - dmg
    - zip
  artifactName: Vaxtly-${version}-${arch}.${ext}
  icon: build/icon.icns
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  hardenedRuntime: true
  gatekeeperAssess: false

linux:
  target:
    - AppImage
    - deb
    - snap
  category: Development
  artifactName: Vaxtly-${version}-${arch}.${ext}
  icon: build/icons
  executableName: vaxtly
  extraResources:
    - from: build/icon.png
      to: icon.png

snap:
  confinement: strict
  grade: stable
  publish:
    - provider: snapStore
      channels:
        - stable
    - provider: github
  plugs:
    - default
    - removable-media
